{"version":3,"file":"js/login.cee2e9ab.js","mappings":"4PACO,MAAMA,EAAmB,IACrB,CAACC,EAAMC,EAAOC,KACbD,EAAME,OAAS,EACfD,EAAS,IAAIE,MAAMC,EAAAA,EAAAA,OAAAA,EAAc,4BAEjCH,GACJ,E,2MCwDR,MAAMI,GAAYC,EAAAA,EAAAA,IAAI,CAClBC,SAAU,cACVC,SAAU,WAERJ,GAAOK,EAAAA,EAAAA,MAEPC,GAAaJ,EAAAA,EAAAA,IAAI,CACnBC,SAAU,CACN,CACII,UAAU,EACVC,QAAS,OACTC,QAAST,EAAKU,EAAE,4BAGxBN,SAAU,CACN,CACIG,UAAU,EACVC,QAAS,OACTG,UAAWjB,QAOjBkB,GAAeV,EAAAA,EAAAA,IAAI,YAEnBW,EAAkB,KACpBD,EAAahB,MACc,aAAvBgB,EAAahB,MAAuB,OAAS,UAAU,EAIzDkB,GAAUZ,EAAAA,EAAAA,KAAI,GACda,GAAQC,EAAAA,EAAAA,MACRC,GAAef,EAAAA,EAAAA,IAAI,MACnBgB,GAASC,EAAAA,EAAAA,MACTC,EAAe,KAEjBH,EAAarB,MAAMyB,UAASC,UACxB,IACI,IAAKC,EAAO,OAEZT,EAAQlB,OAAQ,QACVmB,EAAMS,SAAS,aAAcvB,EAAUL,OAC7CkB,EAAQlB,OAAQ,EAEhBsB,EAAOO,KAAK,IAIhB,CAHE,MAAOC,GACLC,EAAQC,IAAI,uBAAwBF,EAAMG,UAC1Cf,EAAQlB,OAAQ,CACpB,IACF,E,s2CC7GN,MAAMkC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue3-admin-common/./src/views/login/rules.js","webpack://vue3-admin-common/./src/views/login/index.vue","webpack://vue3-admin-common/./src/views/login/index.vue?b794"],"sourcesContent":["import i18n from '@/i18n';\nexport const validatePassword = () => {\n    return (rule, value, callback) => {\n        if (value.length < 6) {\n            callback(new Error(i18n.global.t('msg.login.passwordRule')));\n        } else {\n            callback();\n        }\n    };\n};\n","<template>\n    <div class=\"login-container\">\n        <el-form\n            ref=\"loginFormRef\"\n            class=\"login-form\"\n            :model=\"loginForm\"\n            :rules=\"loginRules\"\n        >\n            <div class=\"title-container\">\n                <h3 class=\"title\">{{ $t('msg.login.title') }}</h3>\n                <LangSelect class=\"lang-select\"></LangSelect>\n            </div>\n            <el-form-item prop=\"username\">\n                <span class=\"svg-container\">\n                    <svg-icon icon=\"user\"></svg-icon>\n                </span>\n                <el-input\n                    placeholder=\"username\"\n                    name=\"username\"\n                    type=\"username\"\n                    v-model=\"loginForm.username\"\n                ></el-input>\n            </el-form-item>\n            <el-form-item prop=\"password\">\n                <span class=\"svg-container\">\n                    <svg-icon icon=\"password\"></svg-icon>\n                </span>\n                <el-input\n                    placeholder=\"password\"\n                    name=\"password\"\n                    v-model=\"loginForm.password\"\n                    :type=\"passwordType\"\n                ></el-input>\n                <span class=\"show-pwd\" @click=\"onChangePwdType\">\n                    <svg-icon\n                        :icon=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\n                    ></svg-icon>\n                </span>\n            </el-form-item>\n\n            <el-button\n                type=\"primary\"\n                class=\"login-btn\"\n                @click=\"handlerLogin\"\n                :loading=\"loading\"\n                >{{ $t('msg.login.loginBtn') }}</el-button\n            >\n\n            <div class=\"tips\" v-html=\"$t('msg.login.desc')\"></div>\n        </el-form>\n    </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport LangSelect from '@/components/LangSelect';\n\nimport { validatePassword } from './rules';\nimport { useI18n } from 'vue-i18n';\n\n// 数据源\nconst loginForm = ref({\n    username: 'super-admin',\n    password: '123456'\n});\nconst i18n = useI18n();\n// 验证规则\nconst loginRules = ref({\n    username: [\n        {\n            required: true,\n            trigger: 'blur',\n            message: i18n.t('msg.login.usernameRule')\n        }\n    ],\n    password: [\n        {\n            required: true,\n            trigger: 'blur',\n            validator: validatePassword()\n        }\n    ]\n});\n\n// 处理密码框文本显示\n// password text\nconst passwordType = ref('password');\n// 绑定的方法直接声明\nconst onChangePwdType = () => {\n    passwordType.value =\n        passwordType.value === 'password' ? 'text' : 'password';\n};\n\n// 处理登录\nconst loading = ref(false);\nconst store = useStore();\nconst loginFormRef = ref(null);\nconst router = useRouter();\nconst handlerLogin = () => {\n    // 1. 表单校验\n    loginFormRef.value.validate(async (valid) => {\n        try {\n            if (!valid) return;\n            // 2. 触发登录动作\n            loading.value = true;\n            await store.dispatch('user/login', loginForm.value);\n            loading.value = false;\n            // 3. 登录后操作\n            router.push('/');\n        } catch (error) {\n            console.log('[ user/login error ]', error.response);\n            loading.value = false;\n        }\n    });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$bg: #2d3a4b;\n$dark_grey: #889aa4;\n$light_grey: #eee;\n$cursor: #fff;\n.login-container {\n    min-height: 100%;\n    width: 100%;\n    background-color: $bg;\n    overflow: hidden;\n    .login-form {\n        position: relative;\n        width: 520px;\n        max-width: 100%;\n        padding: 160px 35px 0;\n        margin: 0 auto;\n        overflow: hidden;\n\n        :deep(.el-form-item) {\n            border: 1px solid rgba($color: #fff, $alpha: 0.1);\n            background-color: rgba($color: #000, $alpha: 0.1);\n            border-radius: 5px;\n            color: #454545;\n        }\n\n        :deep(.el-input) {\n            display: inline-block;\n            width: 85%;\n            height: 47px;\n            input {\n                background: transparent;\n                border: none;\n                border-radius: 0;\n                padding: 12px 5px 12px 15px;\n                color: $light_grey;\n                caret-color: $cursor;\n            }\n        }\n\n        .svg-container {\n            padding: 6px 5px 6px 15px;\n            color: $dark_grey;\n            vertical-align: middle;\n            display: inline-block;\n        }\n        .show-pwd {\n            position: absolute;\n            right: 10px;\n            top: 7px;\n            font-size: 16px;\n            color: $dark_grey;\n            cursor: pointer;\n            user-select: none;\n        }\n        .title-container {\n            position: relative;\n            .title {\n                font-size: 26px;\n                color: $light_grey;\n                margin: 0 auto 40px;\n                text-align: center;\n                font-weight: bold;\n            }\n        }\n        .login-btn {\n            width: 100%;\n            margin-top: 10px;\n        }\n\n        .tips {\n            font-size: 16px;\n            color: #fff;\n            line-height: 25px;\n            margin-top: 30px;\n        }\n        :deep(.lang-select) {\n            position: absolute;\n            top: 4px;\n            right: 0;\n            background-color: #fff;\n            font-size: 22px;\n            padding: 4px;\n            border-radius: 4px;\n            cursor: pointer;\n        }\n    }\n}\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=171281e5&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/meitu/Desktop/hmz/2022-projector/vue3-admin-common/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-171281e5\"]])\n\nexport default __exports__"],"names":["validatePassword","rule","value","callback","length","Error","i18n","loginForm","ref","username","password","useI18n","loginRules","required","trigger","message","t","validator","passwordType","onChangePwdType","loading","store","useStore","loginFormRef","router","useRouter","handlerLogin","validate","async","valid","dispatch","push","error","console","log","response","__exports__"],"sourceRoot":""}